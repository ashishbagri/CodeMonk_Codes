package practice_problems;

import java.util.Scanner;

public class CityAndSoliders {

	private static int[] nodes;
	
	public static void main(String[] args) {
		Scanner sc = new Scanner(System.in);
		int n = Integer.parseInt(sc.next());
		int m = Integer.parseInt(sc.next());
		nodes = new int[n+1];
		for(int i=1;i<=n;i++)
			nodes[i] = i;
		while(m-->0){
			int command = Integer.parseInt(sc.next());
			if(command == 1){
				int a = Integer.parseInt(sc.next());
				int b = Integer.parseInt(sc.next());
				union(a,b);
				continue;
			}
			if(command == 2){
				int a = Integer.parseInt(sc.next());
				int rootA = root(a);
				nodes[rootA] = a;
				nodes[a] = a;
				continue;
			}
			if(command ==3){
				int a = Integer.parseInt(sc.next());
				System.out.println(root(a));
				continue;
			}
		}
	}

	public static void union(int p, int q) {
		int rootP = root(p);
		int rootQ = root(q);
		nodes[rootP] = rootQ;
	}

	private static int root(int p) {
		while (nodes[p] != p)
			p = nodes[p];
		return p;
	}
}
